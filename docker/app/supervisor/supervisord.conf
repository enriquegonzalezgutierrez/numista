; docker/app/supervisor/supervisord.conf
; This is the final, robust configuration file for Supervisor.

[supervisord]
nodaemon=true
user=root
pidfile=/tmp/supervisord.pid
logfile=/var/log/supervisor/supervisord.log
logfile_maxbytes=10MB
logfile_backups=3

[unix_http_server]
; THE FIX: Use the /tmp directory, which is a standard and reliable writable location in Docker containers.
file=/tmp/supervisor.sock
chmod=0700

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
; THE FIX: Ensure the client looks for the socket in the same /tmp directory.
serverurl=unix:///tmp/supervisor.sock

[include]
files = /etc/supervisor/conf.d/*.conf